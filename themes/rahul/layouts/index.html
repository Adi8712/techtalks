{{ define "main" }}
    <div class="container">
        <div class="page-header">
            <p>Hi, I'm Aditya</p>
            <span class="credits">The best designer - <a href="{{ .Site.Params.designer }}" target="_blank" aria-label="Designer">Rahul Nadkarni</a></span>
        </div>
        
        {{ $pages := where .Site.RegularPages "Type" "in" .Site.Params.mainSections }}
        {{ $pages = $pages.ByDate.Reverse }}
        {{ with first 1 $pages }}
            {{ range . }}
                <a href="{{ .Permalink }}" class="card-link" data-title="{{ .Title }}" aria-label="Read: {{ .Title }}">
                    <div class="featured-post">
                        {{ $image := .Resources.GetMatch "cover.*" }}
                        {{ if $image }}
                            {{ $alt := or .Params.coverAlt (printf "Cover image for %s" .Title) }}
                            {{ $w := 1200 }}
                            {{ $sizes := slice 400 700 900 1200 }}
                            {{ $srcset := slice }}
                            {{ range $sizes }}
                                {{ $res := $image.Resize (printf "%dx" .) }}
                                {{ $srcset = $srcset | append (printf "%s %dw" $res.RelPermalink .) }}
                            {{ end }}
                            <div class="featured-image-container">
                                <img src="{{ ($image.Resize (printf "%dx" $w)).RelPermalink }}" srcset="{{ delimit $srcset ", " }}" sizes="(max-width: 820px) 100vw, 50vw" alt="{{ $alt }}" loading="lazy" decoding="async">
                            </div>
                        {{ end }}
                        <div class="featured-content">
                            {{ with .Params.tags }}
                                {{ $first := index . 0 }}
                                {{ with (index $.Site.Taxonomies.tags (lower $first)) }}
                                    <span class="post-meta">{{ .Page.Title }} / {{ $.Date.Format "Jan 2, 2006" }}</span>
                                {{ end }}
                            {{ end }}
                            <h2>{{ .Title }}</h2>
                            <p>{{ .Summary | plainify | truncate 180 }}</p>
                        </div>
                    </div>
                </a>
            {{ end }}
        {{ end }}
    
        <nav class="category-nav">
            <a href="{{ "posts/" | relURL }}">All Posts</a>
            <a href="{{ "board/" | relURL }}">Board</a>
            {{ $featuredTags := 5 }}
            {{ range first $featuredTags (where .Site.Taxonomies.tags.ByCount "Term" "ne" "board") }}
                <a href="{{ .Page.Permalink }}">{{ .Page.Title }}</a>
            {{ end }}
            <a href="{{ "tags/" | relURL }}" class="all-tags-link">Tags &rarr;</a>
        </nav>
    
        <div class="post-list">
            {{ range after 1 $pages }}
                {{ partial "post-card.html" . }}
            {{ end }}
        </div>
    </div>
{{ end }}